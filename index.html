<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Pi Test Payment</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>

<button onclick="pay()">Pay 1 Pi</button>

<script>
Pi.init({ version: "2.0" });

async function pay() {
  await Pi.createPayment(
    {
      amount: 1,
      memo: "Test App Payment",
      metadata: { test: true }
    },
    {
      onReadyForServerApproval: async (paymentId) => {
        await fetch("/api/pay", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ paymentId })
        });
      },
      onComplete: () => alert("✅ Completed"),
      onCancel: () => alert("❌ Cancelled"),
      onError: e => console.error(e)
    }
  );
}
</script>

</body>
</html>
